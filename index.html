<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Express App Code</title>
  <style>
    pre {
      background: #f4f4f4;
      border: 1px solid #ccc;
      padding: 1em;
      overflow-x: auto;
      font-size: 1em;
    }
    body {
      font-family: Arial, sans-serif;
      margin: 2em;
      background: #fff;
      color: #222;
    }
    h1 {
      color: #2c3e50;
    }
  </style>
</head>
<body>
  <h1>Express Server Code (JavaScript)</h1>
  <pre>
const express = require('express');
const bodyParser = require('body-parser');
const cors = require('cors');
const supplyChainOntology = require('./supplyChainOntology');
const aiAgent = require('./aiAgent');

const app = express();
app.use(cors());
app.use(bodyParser.json());

app.post('/api/ask', async (req, res) => {
  const { question } = req.body;
  // Step 1: AI Agent parses question
  const parsed = await aiAgent.parseQuestion(question);
  // Step 2: Ontology queried and answer assembled
  const answer = await supplyChainOntology.answerQuestion(parsed);
  // Step 3: Visual journey steps
  const journey = parsed.journey;
  res.json({ answer, journey });
});

app.get('/api/dashboard', async (req, res) => {
  // Example: Returns summary metrics (mocked for now)
  const dashboardData = await supplyChainOntology.getDashboardData();
  res.json(dashboardData);
});

app.listen(4000, () => {
  console.log('Server running on http://localhost:4000');
});
  </pre>
</body>
</html>